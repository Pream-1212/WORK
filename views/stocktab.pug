extends table_layout

block content
  .container.mt-5
    h3.mb-3 Stock Records
    table.table.table-bordered.table-striped
      thead.table-dark
        tr
          th Product Name
          th Product Type
          th Cost Price
          th Selling Price
          th Quantity
          th Supplier Name
          th Quality
          th Color
          th Measurements
          th Status
          if currentUser.role === 'manager'
            th Update
            th Delete
      tbody
        each item in stocktab
          tr
            td #{item.productName}
            td #{item.productType}
            td #{item.costPrice}
            td #{item.sellPrice}
            td #{item.quantity}
            td #{item.supplierName}
            td #{item.quality}
            td #{item.color}
            td #{item.measurements}
            if currentUser.role === 'manager'
              td
                if item.quantity <= 20
                  span.badge.bg-danger Low Stock (#{item.quantity} left)
                else
                  span.badge.bg-success In Stock
              td
                a.btn.btn-warning.btn-sm(href=`/editstock/${item._id}`) Edit
              td
                form(method='post', action='/deletestock')
                  input(type='hidden', name='id', value=item._id)
                  button.btn.btn-danger.btn-sm(type='submit') Delete
        else
          tr
            td(colspan="12").text-center No stockhistory available

    // Add Stock button (placed below table)
    a.btn.btn-warning.mt-3(href='/stockreport') Add Stockhistory
